<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz by Topic</title>
</head>
<body>
    <header>
        <h2>QUIZ TIME</h2>
    </header>

    <main>
      <div *ngIf="timeRemaining >= 0" class="timer">
        <span class="timer-label">Time Remaining:</span>
        <span class="timer-value">{{ formatTime(timeRemaining) }}</span>
        <span class="icon-container">
          <img src="../../../../../assets/images/avatars/hourglass.png" alt="Hourglass Icon" class="icon" [ngClass]="{'spinning': timeRemaining > 1}" >
        </span>
      </div>
    
      <form [formGroup]="quizForm">
        <section class="topics" *ngFor="let question of questions; let i = index">
          <h2>Question {{ i + 1 }} / {{ questions.length }} ({{ question.points }}pts)</h2>
          <h6>{{ question.question }}</h6>
    
          <div class="form-group">
            <div class="form-check" *ngFor="let choice of [question.choice1, question.choice2, question.choice3]; let j = index">
              <input class="form-check-input" type="radio" [attr.id]="'choice_'+i+'_'+j" [attr.name]="'question_'+i" formControlName="selectedOption_{{ i }}" [value]="choice">
              <label class="form-check-label" [attr.for]="'choice_'+i+'_'+j">{{ choice }}</label>
            </div>
            <div *ngIf="quizForm.get('selectedOption_' + i).errors " class="text-danger">Vous devez choisir une option.</div>
          </div>
        </section>
      </form>
    
      <div class="button-container">
        <button class="btn btn-primary" (click)="saveQuiz()" [disabled]="quizForm.invalid">Save Quiz</button>
      </div>
    </main>

  </body>
</html>
