<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.5/css/dataTables.bootstrap5.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <!-- Include Font Awesome -->
</head>
<body>
    <!-- Modèle d'edit -->
    <div class="add-modal" *ngIf="showModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Question</h5>
                    <button type="button" class="btn-close" (click)="toggleModal(false)" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form [formGroup]="questionForm">
                        <div class="mb-3">
                            <label  class="form-label">Question</label>
                            <input type="text" class="form-control" placeholder="question" formControlName="question" >

                            <div class="form-error font-medium text-red-600 dark:text-red-500" *ngIf="questionForm.get('question')?.hasError('required') && questionForm.get('question')?.touched">
                                Question is required
                            </div>
                        </div>
                
                        <div class="mb-3">
                            <label  class="form-label">choice1</label>
                            <input type="text" class="form-control" placeholder="choice1" formControlName="choice1">
                            
                            <div class="form-error font-medium text-red-600 dark:text-red-500" *ngIf="questionForm.get('choice1')?.hasError('required') && questionForm.get('choice1')?.touched">
                                choice1 is required
                            </div>
                        </div>

                        <div class="mb-3">
                            <label  class="form-label">choice2</label>
                            <input type="text" class="form-control" placeholder="choice2" formControlName="choice2">
                            
                            <div class="form-error font-medium text-red-600 dark:text-red-500" *ngIf="questionForm.get('choice2')?.hasError('required') && questionForm.get('choice2')?.touched">
                                choice2 is required
                            </div>
                        </div>

                        <div class="mb-3">
                            <label  class="form-label">choice3</label>
                            <input type="text" class="form-control" placeholder="choice3" formControlName="choice3">
                            
                            <div class="form-error font-medium text-red-600 dark:text-red-500" *ngIf="questionForm.get('choice3')?.hasError('required') && questionForm.get('choice3')?.touched">
                                choice3 is required
                            </div>
                        </div>

                        <div class="mb-3">
                            <label  class="form-label">correctAnswer</label>
                            <input type="text" class="form-control" placeholder="correctAnswer" formControlName="correctAnswer">
                            
                            <div class="form-error font-medium text-red-600 dark:text-red-500" *ngIf="questionForm.get('correctAnswer')?.hasError('required') && questionForm.get('correctAnswer')?.touched">
                                correctAnswer is required
                            </div>
                        </div>

                        <div class="mb-3">
                            <label  class="form-label">points</label>
                            <input type="text" class="form-control" placeholder="points" formControlName="points">
                            
                            <div class="form-error font-medium text-red-600 dark:text-red-500" *ngIf="questionForm.get('points')?.hasError('required') && questionForm.get('points')?.touched">
                                points is required
                            </div>
                            <div class="form-error font-medium text-red-600 dark:text-red-500" *ngIf="questionForm.get('points')?.hasError('pattern') && questionForm.get('points')?.touched">
                                points must be number
                            </div>
                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" (click)="toggleModal(false)">Close</button>
                    <button type="submit" class="btn btn-primary" (click)="editQuestion()" [disabled]="questionForm.invalid">Save</button>
                </div>
            </div>
        </div>
    </div>
    <!-- end model d'edit -->


        <!-- Modèle de stat sur une question -->
        <div class="add-modal" *ngIf="showModalStat">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5>Statistique :</h5>
                        <button type="button" class="btn-close" (click)="toggleModalStat(false)" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Total correct answers: {{ totalCorrectAnswers }}</p>
                    
                        <p>Total answers: {{ TotalAnswers }}</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" (click)="toggleModalStat(false)">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- end Modèle de stat sur une question -->



    <!-- Tableau de données -->
    <table id="example" class="table table-striped custom-table">
        <thead>
            <tr>
                <th>question</th>
                <th>choice1</th>
                <th>choice2</th>
                <th>choice3</th>
                <th>correct Answer</th>
                <th>points</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody >
            <!-- Contenu de la table -->
            <tr *ngFor="let q of questions">
                <td>{{q.question}}</td>
                <td>{{q.choice1}}</td>
                <td>{{q.choice2}}</td>
                <td>{{q.choice3}}</td>
                <td>{{q.correctAnswer}}</td>
                <td>{{q.points}}</td>
                <td>
                    
                    <button class="btn btn-primary" (click)="getTotalCorrectAnswersForQuestion(q.numQuestion)" ><i class="fas fa-info-circle"></i></button> <!-- Icône de modification -->
                    <button class="btn btn-primary" (click)="editModel(q)" ><i class="fas fa-edit"></i></button> <!-- Icône de modification -->
                    <button class="btn btn-danger" (click)="delQuestion(q.numQuestion)" ><i class="fas fa-trash-alt"></i></button> <!-- Icône de suppression -->
                </td>
            </tr>         
        </tbody>
    </table>


    <!-- Modèle pour afficher le résultat -->
<!-- <div class="modal" *ngIf="showStatModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Total Correct Answers</h5>
                <button type="button" class="close" (click)="toggleStatModal(false)" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Total correct answers: {{ totalCorrectAnswers }}</p>
            </div>
        </div>
    </div>
</div> -->



</body>
</html>
